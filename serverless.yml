service: jwt

provider:
  name: aws
  runtime: nodejs12.x
  stage: dev
  region: ${opt:region,'ap-south-1'}
  environment:     
    emailVerificationTableName: dev-emailVerification
    JWT_SECRET: askjaediuwqyer42343984jshdjsbdfsf
  iamRoleStatements:
  - Effect: Allow
    Action:
      - dynamodb:Query
      - dynamodb:Scan
      - dynamodb:GetItem
      - dynamodb:PutItem
      - dynamodb:UpdateItem
      - dynamodb:DeleteItem
    Resource: arn:aws:dynamodb:ap-south-1:075597226000:table/dev-emailVerification

resources:
  Resources:
    EmailVerification:
      Type: AWS::DynamoDB::Table
      Properties:
        # Generate a name based on the stage
        TableName: dev-emailVerification
        AttributeDefinitions:
          - AttributeName: PK
            AttributeType: S
          - AttributeName: SK
            AttributeType: S
        KeySchema:
          - AttributeName: PK
            KeyType: HASH
          - AttributeName: SK
            KeyType: RANGE
        # Set the capacity to auto-scale
        BillingMode: PAY_PER_REQUEST

functions:
  createJWT:
    handler: handler.createJWT